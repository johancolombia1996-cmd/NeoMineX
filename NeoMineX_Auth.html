<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NeoMineX - Login / Registro</title>
  <meta name="description" content="NeoMineX login y registro futurista - panel SMM" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
    :root{
      --bg:#030617; --card:rgba(8,14,23,0.75); --accent1:#06b6d4; --accent2:#0ea5e9;
      --glass:rgba(255,255,255,0.03); --text:#e6f7fb; --muted:rgba(230,247,251,0.6);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',system-ui,Roboto,Arial;color:var(--text);background:var(--bg);-webkit-font-smoothing:antialiased}
    #bgCanvas{position:fixed;inset:0;z-index:0;display:block}
    .wrap{position:relative;z-index:8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
    .card{
      width:100%;max-width:960px;border-radius:16px;padding:0;overflow:hidden;
      display:grid;grid-template-columns:460px 1fr;gap:0;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(56,189,248,0.06);box-shadow:0 30px 80px rgba(2,6,23,0.7);
    }
    .auth{
      padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;flex-direction:column;gap:12px;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;color:#021b22;font-weight:700;box-shadow:0 8px 30px rgba(6,182,212,0.12)}
    h1{margin:0;font-size:16px;text-transform:uppercase;color:var(--accent2)}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .switchRow{display:flex;gap:8px;margin-top:6px}
    .tabBtn{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);cursor:pointer;font-weight:600}
    .tabBtn.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#021b22;box-shadow:0 10px 30px rgba(6,182,212,0.12)}
    form{display:flex;flex-direction:column;gap:10px;margin-top:6px}
    label.small{font-size:12px;color:var(--muted);text-align:left}
    input{width:100%;padding:11px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(6,12,20,0.6);color:var(--text);font-size:14px}
    .row{display:flex;gap:10px}
    .half{flex:1}
    .actionBtn{padding:12px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#021b22;font-weight:800;cursor:pointer}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);font-weight:700}
    .note{font-size:12px;color:var(--muted)}
    .error{color:#ff7b7b;font-size:13px}
    .panelSide{padding:32px;background:linear-gradient(180deg, rgba(6,12,20,0.6), rgba(8,14,23,0.6));display:flex;flex-direction:column;gap:14px;align-items:center;justify-content:center}
    .panelSide h2{margin:0;color:var(--accent2)}
    .panelSide p{margin:0;color:var(--muted);text-align:center}
    .features{display:flex;flex-direction:column;gap:10px;margin-top:8px}
    .feat{display:flex;gap:10px;align-items:center}
    .dot{width:10px;height:10px;border-radius:50%;background:var(--accent1);box-shadow:0 8px 24px rgba(6,182,212,0.12)}
    @media (max-width:980px){
      .card{grid-template-columns:1fr;max-width:520px}
      .panelSide{order:2;padding:20px}
      .auth{order:1;padding:18px}
    }
    @media (max-width:420px){
      .brand h1{font-size:14px}
      input{font-size:13px;padding:10px}
      .actionBtn{padding:11px}
    }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <div class="wrap">
    <div class="card" role="region" aria-label="NeoMineX Auth">
      <div class="auth" aria-hidden="false">
        <div class="brand">
          <div class="logo">NX</div>
          <div>
            <h1 id="pageTitle">NeoMineX - Login</h1>
            <p class="lead">Accede a NeoMineX.</p>
          </div>
        </div>

        <div class="switchRow" role="tablist" aria-label="Login or Register">
          <button class="tabBtn active" id="btnLogin" role="tab">Iniciar Sesi√≥n</button>
          <button class="tabBtn" id="btnRegister" role="tab">Crear Cuenta</button>
        </div>

        <!-- LOGIN FORM -->
        <form id="loginForm" autocomplete="on" novalidate>
          <div>
            <label class="small" for="loginEmail">Correo electr√≥nico</label>
            <input id="loginEmail" type="email" placeholder="tucorreo@ejemplo.com" required />
          </div>
          <div>
            <label class="small" for="loginPass">Contrase√±a</label>
            <input id="loginPass" type="password" placeholder="********" required />
          </div>

          <div class="row" style="align-items:center">
            <button type="submit" class="actionBtn">Iniciar Sesi√≥n</button>
            <button type="button" id="loginDemo" class="ghost">Demo</button>
          </div>
          <div class="note">¬øNo tienes cuenta? Pulsa <strong>Crear Cuenta</strong> arriba.</div>
          <div id="loginError" class="error" role="alert" aria-live="polite"></div>
        </form>

        <!-- REGISTER FORM -->
        <form id="regForm" style="display:none" autocomplete="on" novalidate>
          <div>
            <label class="small" for="regEmail">Correo electr√≥nico</label>
            <input id="regEmail" type="email" placeholder="tucorreo@ejemplo.com" required />
          </div>
          <div>
            <label class="small" for="regPass">Contrase√±a</label>
            <input id="regPass" type="password" placeholder="Min 6 caracteres" required />
          </div>
          <div>
            <label class="small" for="regPass2">Confirmar contrase√±a</label>
            <input id="regPass2" type="password" placeholder="Repite la contrase√±a" required />
          </div>
          <!-- NUEVO: C√≥digo de referido -->
          <div>
            <label class="small" for="refCode">C√≥digo de referido</label>
            <input id="refCode" type="text" readonly />
          </div>
          <div class="row">
            <button type="submit" class="actionBtn">Crear Cuenta</button>
            <button type="button" id="cancelReg" class="ghost">Cancelar</button>
          </div>
          <div id="regError" class="error" role="alert" aria-live="polite"></div>
        </form>
      </div>

      <!-- RIGHT PANEL -->
      <div class="panelSide" aria-hidden="false">
        <div class="features" role="list">
          <div class="feat" role="listitem"><div class="dot" aria-hidden></div><div class="muted">‚ö° Miner√≠a ultrarr√°pida con tecnolog√≠a de √∫ltima generaci√≥n.</div></div>
          <div class="feat" role="listitem"><div class="dot" aria-hidden></div><div class="muted">ü§ñ Energ√≠a optimizada por IA para maximizar ganancias.</div></div>
          <div class="feat" role="listitem"><div class="dot" aria-hidden></div><div class="muted">üåå Dise√±o futurista y escalable, listo para el metaverso financiero.</div></div>
        </div>
      </div>
    </div>
  </div>

  <script>
const btnLogin = document.getElementById('btnLogin');
const btnRegister = document.getElementById('btnRegister');
const loginForm = document.getElementById('loginForm');
const regForm = document.getElementById('regForm');
const pageTitle = document.getElementById('pageTitle');
const loginError = document.getElementById('loginError');
const regError = document.getElementById('regError');
const loginDemo = document.getElementById('loginDemo');

// Generar c√≥digo de referido
function generateRefCode(length = 4){
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let code = '';
  for(let i=0;i<length;i++) code += chars.charAt(Math.floor(Math.random()*chars.length));
  return code;
}

// Toggle login/registro
btnLogin.addEventListener('click', ()=>{
  btnLogin.classList.add('active'); btnRegister.classList.remove('active');
  loginForm.style.display='flex'; regForm.style.display='none';
  pageTitle.textContent='NeoMineX - Login';
});

btnRegister.addEventListener('click', ()=>{
  btnRegister.classList.add('active'); btnLogin.classList.remove('active');
  loginForm.style.display='none'; regForm.style.display='flex';
  pageTitle.textContent='NeoMineX - Registro';
  document.getElementById('refCode').value = generateRefCode();
});

// Validaci√≥n de email
function validEmail(e){ return /\S+@\S+\.\S+/.test(e); }

// Guardar y obtener usuario (localStorage demo)
function saveUser(email, pass){ localStorage.setItem('neomx_user_'+email, JSON.stringify({email,pass})); }
function getUser(email){ const s = localStorage.getItem('neomx_user_'+email); return s?JSON.parse(s):null; }

// Registro
document.getElementById('regForm').addEventListener('submit', e=>{
  e.preventDefault(); regError.textContent='';
  const email = document.getElementById('regEmail').value.trim();
  const p1 = document.getElementById('regPass').value;
  const p2 = document.getElementById('regPass2').value;
  if(!validEmail(email)){ regError.textContent='Introduce un correo v√°lido.'; return; }
  if(p1.length < 6){ regError.textContent='La contrase√±a debe tener al menos 6 caracteres.'; return; }
  if(p1!==p2){ regError.textContent='Las contrase√±as no coinciden.'; return; }
  if(getUser(email)){ regError.textContent='Ya existe una cuenta con ese correo.'; return; }
  saveUser(email,p1);
  alert('Cuenta creada correctamente. C√≥digo de referido: '+document.getElementById('refCode').value);
  btnLogin.click();
  document.getElementById('loginEmail').value = email;
  document.getElementById('loginPass').value = '';
});

// Cancelar registro
document.getElementById('cancelReg').addEventListener('click', ()=>{ btnLogin.click(); });

// Demo
loginDemo.addEventListener('click', ()=>{
  const demoEmail = 'demo@neomineX.local';
  if(!getUser(demoEmail)) saveUser(demoEmail,'demopass');
  document.getElementById('loginEmail').value = demoEmail;
  document.getElementById('loginPass').value = 'demopass';
});

// LOGIN actualizado con validaci√≥n
loginForm.addEventListener('submit', e=>{
  e.preventDefault(); loginError.textContent='';
  const email = document.getElementById('loginEmail').value.trim();
  const pass = document.getElementById('loginPass').value.trim();
  
  if(email === '' || pass === ''){
    loginError.textContent = 'Coloca un correo y una contrase√±a correctos';
    return;
  }

  const u = getUser(email);
  if(!u || u.pass !== pass){
    loginError.textContent = 'Coloca un correo y una contrase√±a correctos';
    return;
  }

  // Si todo es correcto, ir directo a Home
  window.location.href = 'https://johancolombia1996-cmd.github.io/NeoMineX/NeoMineX%20-%20Home.html';
});
  </script>
</body>
</html>
